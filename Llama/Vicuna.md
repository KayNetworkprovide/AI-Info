lmsys/vicuna-13b-delta-v0
[lmsys/vicuna-13b-delta-v0 ¬∑ Hugging Face](https://huggingface.co/lmsys/vicuna-13b-delta-v0)


[Vicuna: An Open-Source Chatbot Impressing GPT-4 with 90%* ChatGPT Quality | by the Team with members from UC Berkeley, CMU, Stanford, and UC San Diego (lmsys.org)](https://vicuna.lmsys.org/)

# Vicuna: An Open-Source Chatbot Impressing GPT-4 with 90%*¬†ChatGPT Quality

## by the Team with members from UC Berkeley, CMU, Stanford, and UC San Diego

*¬†_According to a fun and non-scientific evaluation with GPT-4. Further rigorous evaluation is needed._

We introduce Vicuna-13B, an open-source chatbot trained by fine-tuning LLaMA on user-shared conversations collected from ShareGPT. Preliminary evaluation using GPT-4 as a judge shows Vicuna-13B achieves more than 90%*¬†quality of OpenAI ChatGPT and Google Bard while outperforming other models like LLaMA and Stanford Alpaca in more than 90%*¬†of cases. The cost of training Vicuna-13B is around $300. The training and serving¬†[code](https://github.com/lm-sys/FastChat), along with an online¬†[demo](https://chat.lmsys.org/), are publicly available for non-commercial use.

![favicon](https://vicuna.lmsys.org/favicon.jpeg)

Vicuna (generated by stable diffusion 2.1)

## How Good is Vicuna?

We present examples of Alpaca and Vicuna responses to our benchmark questions. After fine-tuning Vicuna with 70K user-shared ChatGPT conversations, we discover that Vicuna becomes capable of generating more detailed and well-structured answers compared to Alpaca (see examples below), with the quality on par with ChatGPT.

---

**Question:**¬†Compose an engaging travel blog post about a recent trip to Hawaii, highlighting cultural experiences and must-see attractions.

Assistant #1

Alpaca-13bLLaMA-13bChatGPT-3.5Bard

I have composed a travel blog post about my recent trip to Hawaii. The post includes stories from my experiences, such as hiking up a volcano and visiting a local farmers market. I also included plenty of photos to give the reader a sense of place. I highlighted some of the unique cultural experiences, such as an evening spent listening to live Hawaiian music, as well as must-see attractions, like the beautiful beaches and lush rainforests. I ended the post with a personal reflection on the trip and why it was so special to me.

_keyboard_arrow_down_Show more

üèÜ Assistant #2 (Vicuna-13b, our model)

Aloha, fellow travelers! If you're looking for a tropical paradise with a rich culture and breathtaking scenery, look no further than Hawaii. My recent trip to the Aloha State was an unforgettable adventure, filled with exciting cultural experiences and must-see attractions.

First and foremost, I was blown away by the warm and welcoming spirit of the Hawaiian people. From the moment I arrived, I felt at home and was greeted with open arms by the locals. Whether it was the hotel staff, my tour guide, or the friendly strangers I met on the street, everyone I encountered was eager to share their love for their home state.

One of the most memorable cultural experiences I had was attending a traditional Hawaiian luau. At this festive event, I was treated to a delicious feast of local cuisine, including poi, laulau, and kalua pig, all while listening to the hypnotic beat of the hula. The dancers, dressed in beautiful native garb, told stories of the islands and their history through their movements. It was truly a magical evening that allowed me to connect with the rich heritage of Hawaii.

Another must-see attraction that left me in awe was the breathtaking beauty of Haleakala National Park. The park boasts a dormant volcano, the largest on the island, that offers a stunning sunrise or sunset hike. As the sun rose over the horizon, I was struck by the vibrant colors and stark beauty of the landscape. It was an experience that truly humbled me, and one that I will never forget.

Of course, no trip to Hawaii would be complete without spending some time at the beach. With its crystal-clear waters, golden sand, and gentle waves, Wailea Beach was the perfect spot to relax and soak up the sun. Whether you're an avid surfer, a beach bum, or simply looking to unwind, Hawaii's beaches are sure to steal your heart.

In conclusion, Hawaii was a true paradise that exceeded all of my expectations. From the moment I stepped off the plane, I was immersed in a culture that was rich, vibrant, and full of life. With so many must-see attractions and unforgettable experiences, Hawaii is the perfect destination for any traveler looking for a little bit of adventure, culture, and relaxation. Mahalo for reading, and I hope to see you in Hawaii soon!

_keyboard_arrow_down_Show more

GPT-4 Evaluation (Score: Alpaca-13b 7/10, Vicuna-13b 10/10)

**Assistant 1**¬†provided a brief overview of the travel blog post but did not actually compose the blog post as requested, resulting in a lower score.¬†**Assistant 2**, on the other hand, composed a detailed and engaging travel blog post about a recent trip to Hawaii, highlighting cultural experiences and must-see attractions, which fully addressed the user's request, earning a higher score.

  

CategoryWritingRoleplayCommon-senseFermiCounterfactualCodingMathGenericKnowledge

QuestionQ1: Compose an engaging travel blog post about a recent trip to Hawaii, highlighting cultural experiences and must-see attractions.Q2: Can you help me write a formal email to a potential business partner proposing a joint venture?Q3: Can you help me write a resignation letter to my current employer, while leaving on good terms and expressing gratitude for the opportunities provided?Q4: Use an appropriate format to structure a formal letter of recommendation for a student applying to a prestigious graduate program in computer science.Q5: Write a compelling product launch announcement email to inform our customers of our new software solution.Q6: Draft an apology email to a customer who experienced a delay in their order, and provide reassurance that the issue has been resolved.Q7: Write a script for a YouTube video exploring the history and cultural significance of jazz.Q8: Write a captivating movie review for a recently released science fiction film, discussing its plot, characters, and special effects.Q9: Structure a podcast script for an episode discussing the influence of streaming platforms on the music industry.Q10: Write a symphony concert review, discussing the orchestra's performance and overall audience experience.

_keyboard_arrow_left__keyboard_arrow_right_

---

However, evaluating chatbots is never a simple task. With recent advancements in GPT-4, we are curious whether its capabilities have reached a human-like level that could enable an automated evaluation framework for benchmark generation and performance assessments. Our initial finding indicates that GPT-4 can produce highly consistent ranks and detailed assessment when comparing chatbots‚Äô answers (see above example of GPT-4 judgment). Preliminary evaluations based on GPT-4, summarized in Figure 1, show that Vicuna achieves 90%*¬†capability of Bard/ChatGPT. While this proposed framework shows a potential to automate chatbot assessment,¬†**it is not yet a rigorous approach**. Building an evaluation system for chatbots remains an open question requiring further research. More details are provided in the evaluation section.

![chart](https://vicuna.lmsys.org/assets/vicuna/chart.svg)Figure 1. Relative Response Quality Assessed by GPT-4*

## Online Demo

Try the Vicuna-13B demo¬†[here](https://chat.lmsys.org/)!

[](https://chat.lmsys.org/)

## Overview

The rapid advancement of large language models (LLMs) has revolutionized chatbot systems, resulting in unprecedented levels of intelligence as seen in OpenAI‚Äôs ChatGPT. However, despite its impressive performance, the training and architecture details of ChatGPT remain unclear, hindering research and open-source innovation in this field. Inspired by the Meta LLaMA and Stanford Alpaca project, we introduce Vicuna-13B, an open-source chatbot backed by an enhanced dataset and an easy-to-use, scalable infrastructure. By fine-tuning a LLaMA base model on user-shared conversations collected from ShareGPT.com, Vicuna-13B has demonstrated competitive performance compared to other open-source models like Stanford Alpaca. This blog post provides a preliminary evaluation of Vicuna-13B‚Äôs performance and describes its training and serving infrastructure. We also invite the community to interact with our online demo to test the capabilities of this chatbot.

![Overview](https://vicuna.lmsys.org/assets/vicuna/overview.png)Figure 2. Workflow Overview

Figure 2 provides an overview of our work. To begin, we collected around 70K conversations from ShareGPT.com, a website where users can share their ChatGPT conversations. Next, we enhanced the training scripts provided by Alpaca to better handle multi-round conversations and long sequences. The training was done with PyTorch FSDP on 8 A100 GPUs in one day. For serving the demo, we implemented a lightweight distributed serving system. We conducted a preliminary evaluation of the model quality by creating a set of 80 diverse questions and utilizing GPT-4 to judge the model outputs. To compare two different models, we combine the outputs from each model into a single prompt for each question. The prompts are then sent to GPT-4, which assesses which model provides better responses. A detailed comparison of LLaMA, Alpaca, ChatGPT, and Vicuna is shown in Table 1 below.

Table 1. Comparison between several notable models

Model Name

LLaMA

Alpaca

Vicuna

Bard/ChatGPT

Dataset

Publicly available datasets  
(1T token)

Self-instruct from davinci-003 API  
(52K samples)

User-shared conversations  
(70K samples)

N/A

Training code

N/A

Available

Available

N/A

Evaluation metrics

Academic benchmark

Author evaluation

GPT-4 assessment

Mixed

Training cost  
(7B)

82K GPU-hours

$500 (data) + $100 (training)

$140 (training)

N/A

Training cost  
(13B)

135K GPU-hours

N/A

$300 (training)

N/A

## Training

Vicuna is created by fine-tuning a LLaMA base model using approximately 70K user-shared conversations gathered from ShareGPT.com with public APIs. To ensure data quality, we convert the HTML back to markdown and filter out some inappropriate or low-quality samples. Additionally, we divide lengthy conversations into smaller segments that fit the model‚Äôs maximum context length.

Our training recipe builds on top of¬†[Stanford‚Äôs alpaca](https://crfm.stanford.edu/2023/03/13/alpaca.html)¬†with the following improvements.

-   **Memory Optimizations:**¬†To enable Vicuna‚Äôs understanding of long context, we expand the max context length from 512 in alpaca to 2048, which substantially increases GPU memory requirements. We tackle the memory pressure by utilizing¬†[gradient checkpointing](https://arxiv.org/abs/1604.06174)¬†and¬†[flash attention](https://arxiv.org/abs/2205.14135).
-   **Multi-round conversations:**¬†We adjust the training loss to account for multi-round conversations and compute the fine-tuning loss solely on the chatbot‚Äôs output.
-   **Cost Reduction via Spot Instance:**¬†The 40x larger dataset and 4x sequence length for training poses a considerable challenge in training expenses. We employ¬†[SkyPilot](https://github.com/skypilot-org/skypilot)¬†[managed spot](https://skypilot.readthedocs.io/en/latest/examples/spot-jobs.html)¬†to reduce the cost by leveraging the cheaper spot instances with auto-recovery for preemptions and auto zone switch. This solution slashes costs for training the 7B model from $500 to around $140 and the 13B model from around $1K to $300.

## Serving

We build a serving system that is capable of serving multiple models with distributed workers. It supports flexible plug-in of GPU workers from both on-premise clusters and the cloud. By utilizing a fault-tolerant controller and managed spot feature in SkyPilot, this serving system can work well with cheaper spot instances from multiple clouds to reduce the serving costs. It is currently a lightweight implementation and we are working on integrating more of our latest¬†[research](https://arxiv.org/abs/2302.11665)¬†into it.

## How To Evaluate a Chatbot?

Evaluating AI chatbots is a challenging task, as it requires examining language understanding, reasoning, and context awareness. With AI chatbots becoming more advanced, current open benchmarks may no longer suffice. For instance, the evaluation dataset used in Stanford‚Äôs Alpaca,¬†[self-instruct](https://github.com/yizhongw/self-instruct/tree/main/human_eval), can be effectively answered by SOTA chatbots, making it difficult for humans to discern differences in performance. More limitations include training/test data contamination and the potentially high cost of creating new benchmarks. To tackle these issues, we propose an evaluation framework based on GPT-4 to automate chatbot performance assessment.

First, we devised eight question categories, such as Fermi problems, roleplay scenarios, and coding/math tasks, to test various aspects of a chatbot‚Äôs performance. Through careful prompt engineering, GPT-4 is able to generate diverse, challenging questions that baseline models struggle with. We select ten questions per category and collect answers from five chatbots: LLaMA, Alpaca, ChatGPT, Bard, and Vicuna. We then ask GPT-4 to rate the quality of their answers based on helpfulness, relevance, accuracy, and detail. We discover that GPT-4 can produce not only relatively consistent scores but also detailed explanations on why such scores are given (detailed examples¬†[link](https://vicuna.lmsys.org/eval)). However, we also notice that GPT-4 is not very good at judging coding/math tasks.

![response comparison](https://vicuna.lmsys.org/assets/vicuna/response-compare.png)Figure 3. Response Comparison Assessed by GPT-4

Figure 3 displays the comparison results between all baselines and Vicuna. GPT-4 prefers Vicuna over state-of-the-art open-source models (LLaMA, Alpaca) in more than 90% of the questions, and it achieves competitive performance against proprietary models (ChatGPT, Bard). In 45% of the questions, GPT-4 rates Vicuna‚Äôs response as better or equal to ChatGPT‚Äôs. As GPT-4 assigns a quantitative score to each response on a scale of 10, we calculate the total score for each (baseline, Vicuna) comparison pair by adding up the scores obtained by each model on 80 questions. As shown in Table 2, Vicuna‚Äôs total score is 92% of ChatGPT‚Äôs. Despite recent advancements, these chatbots still face limitations, such as struggling with basic math problems or having limited coding ability.

Table 2. Total Scores Assessed by GPT-4.

Baseline

Baseline Score

Vicuna Score

LLaMA-13B

513.0

694.0

Alpaca-13B

583.0

704.0

Bard

664.0

655.5

ChatGPT

693.0

638.0

  

While this proposed evaluation framework demonstrates the potential for assessing chatbots, it is not yet a rigorous or mature approach, as large language models are prone to hallucinate. Developing a comprehensive, standardized evaluation system for chatbots remains an open question requiring further research.

## Limitations

We have noticed that, similar to other large language models, Vicuna has certain limitations. For instance, it is not good at tasks involving reasoning or mathematics, and it may have limitations in accurately identifying itself or ensuring the factual accuracy of its outputs. Additionally, it has not been sufficiently optimized to guarantee safety or mitigate potential toxicity or bias. To address the safety concerns, we use the OpenAI¬†[moderation](https://platform.openai.com/docs/guides/moderation/overview)¬†API to filter out inappropriate user inputs in our online demo. Nonetheless, we anticipate that Vicuna can serve as an open starting point for future research to tackle these limitations.

## Release

In our first release, we will share the training, serving, and evaluation code on a GitHub repo:¬†[https://github.com/lm-sys/FastChat](https://github.com/lm-sys/FastChat). We also released the Vicuna-13B model weights, please find the instructions¬†[here](https://github.com/lm-sys/FastChat#vicuna-weights). There is no plan to release the dataset. Join our¬†[Discord](https://discord.gg/h6kCZb72G7)¬†server and follow our¬†[Twitter](https://twitter.com/lmsysorg)¬†to get the latest updates.

## License

The online demo is a research preview intended for non-commercial use only, subject to the model¬†[License](https://github.com/facebookresearch/llama/blob/main/MODEL_CARD.md)¬†of LLaMA,¬†[Terms of Use](https://openai.com/policies/terms-of-use)¬†of the data generated by OpenAI, and¬†[Privacy Practices](https://chrome.google.com/webstore/detail/sharegpt-share-your-chatg/daiacboceoaocpibfodeljbdfacokfjb)¬†of ShareGPT. Please contact us If you find any potential violation.  
The code is released under the Apache License 2.0.

## The Team

This is a joint effort with collaborators from multiple institutions, including UC Berkeley, CMU, Stanford, UC San Diego, and MBZUAI.

**Students (alphabetical order):**  
Wei-Lin Chiang, Zhuohan Li, Zi Lin, Ying Sheng, Zhanghao Wu, Hao Zhang, Lianmin Zheng, Siyuan Zhuang, Yonghao Zhuang

**Advisors (alphabetical order):**  
Joseph E. Gonzalez, Ion Stoica, Eric P. Xing

## Acknowledgment

We would like to thank Xinyang Geng, Hao Liu, and Eric Wallace from BAIR; Xuecheng Li, and Tianyi Zhang from Stanford Alpaca team for their insightful discussion and feedback. Please check out a blog post from BAIR about a concurrent effort on their chatbot,¬†[Koala](https://bair.berkeley.edu/blog/2023/04/03/koala/).

## Citation

```
@misc{vicuna2023,
    title = {Vicuna: An Open-Source Chatbot Impressing GPT-4 with 90%* ChatGPT Quality},
    url = {https://vicuna.lmsys.org},
    author = {Chiang, Wei-Lin and Li, Zhuohan and Lin, Zi and Sheng, Ying and Wu, Zhanghao and Zhang, Hao and Zheng, Lianmin and Zhuang, Siyuan and Zhuang, Yonghao and Gonzalez, Joseph E. and Stoica, Ion and Xing, Eric P.},
    month = {March},
    year = {2023}
}
```